import { View, ViewProps } from 'react-native';
import { useCountdown } from '@utils';
import { Ellipse, G, Path, Rect, Svg, Text } from 'react-native-svg';

interface TimerProps {
  countdown?: number; // in miliseconds
  style?: ViewProps['style'];
}

export function Timer({ countdown, style }: TimerProps): JSX.Element {
  const { timeInSeconds } = useCountdown({ time: countdown });

  return (
    <Svg width="123" height="108">
      <G fill="none" fill-rule="evenodd">
        <G transform="translate(16 17)">
          <Rect
            width="1.393"
            height="3.214"
            x="44.85"
            fill="#00A8CC"
            rx=".697"
          />
          <Path
            fill="#00A8CC"
            d="M91 45.679c0 .38-.308.688-.689.688h-1.873a.689.689 0 0 1 0-1.377h1.873c.38 0 .689.308.689.689ZM3.25 45.679c0 .38-.307.688-.688.688H.69a.689.689 0 0 1 0-1.377h1.873c.38 0 .689.308.689.689ZM24.766 4.919a.702.702 0 0 1 .953.255l.925 1.584a.688.688 0 0 1-.253.944.702.702 0 0 1-.953-.256l-.925-1.583a.688.688 0 0 1 .253-.944ZM5.863 22.937a.698.698 0 0 1 .948-.254l1.615.922a.684.684 0 0 1 .252.939.698.698 0 0 1-.948.254l-1.616-.922a.684.684 0 0 1-.251-.939ZM6.74 68.397a.684.684 0 0 1 .252-.939l1.616-.922a.698.698 0 0 1 .948.254.684.684 0 0 1-.251.939l-1.616.922a.698.698 0 0 1-.948-.254ZM66.363 4.919a.688.688 0 0 1 .253.944l-.925 1.583a.702.702 0 0 1-.953.256.688.688 0 0 1-.253-.944l.925-1.584a.702.702 0 0 1 .953-.255ZM85.137 22.937a.684.684 0 0 1-.251.939l-1.616.922a.698.698 0 0 1-.948-.254.684.684 0 0 1 .252-.939l1.615-.922a.698.698 0 0 1 .948.254Z"
          />
          <Path
            fill="#E8ECEF"
            d="M84.135 68.397a.698.698 0 0 1-.948.254l-1.616-.922a.684.684 0 0 1-.251-.939.698.698 0 0 1 .948-.254l1.616.922a.684.684 0 0 1 .251.939Z"
          />
        </G>
        <G transform="translate(.023 .977)" id="counter">
          <Path
            fill="#E8ECEF"
            d="m104.82 104.608.044-.045-.15.15c24.044-24.044 24.147-62.924.23-86.842-23.918-23.917-62.799-23.815-86.843.23-24.01 24.009-24.147 62.81-.335 86.737l.004-.003a4.185 4.185 0 0 0 5.769.132l.152-.144c1.638-1.638 1.645-4.287.015-5.917a4.224 4.224 0 0 0-.117-.113l-.4-.405c-20.04-20.705-19.748-53.826.812-74.387 20.769-20.768 54.352-20.857 75.01-.198 20.624 20.623 20.57 54.127-.092 74.904l-.144.152c-1.493 1.646-1.452 4.185.129 5.765 1.629 1.629 4.278 1.622 5.916-.016Z"
          />
          {/* TODO: esse mostra o progresso!!! */}
          <Path
            fill="#00A8CC"
            d="M114.447 61.427c.077-13.628-5.065-27.254-15.435-37.624-20.659-20.659-54.242-20.57-75.01.198C3.44 44.562 3.147 77.683 23.188 98.388l.4.405c.04.037.079.075.117.113 1.63 1.63 1.623 4.279-.015 5.917l-.152.144a4.185 4.185 0 0 1-5.77-.132c-23.815-23.923-23.677-62.725.332-86.734 24.044-24.045 62.925-24.147 86.843-.23 11.706 11.707 17.658 26.998 17.865 42.38.11.38.168.785.168 1.204 0 2.315-1.79 4.19-4.116 4.19-2.326 0-4.267-1.904-4.267-4.218h-.147Z"
          />
          <Ellipse cx="118.832" cy="61.427" fill="#FFF" rx="1.627" ry="1.618" />
        </G>
        <Text
          fill="#00A8CC"
          fontSize={32}
          transform="translate(0 .977)"
          x={50}
          y={75}
        >
          {timeInSeconds}
        </Text>
      </G>
    </Svg>
  );
}
