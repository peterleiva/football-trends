import type {
  FifaCsv,
  Foot,
  Position,
  Rating,
  WorkRate,
} from './dataset.interface';

export function parseFifaCSVRecord(record: string[]): FifaCsv {
  const [
    knownAs,
    fullName,
    overall,
    potential,
    marketValue,
    positionsPlayed,
    bestPosition,
    nationality,
    imageLink,
    age,
    height,
    weight,
    totalStats,
    baseStats,
    clubName,
    wage,
    releaseClause,
    clubPosition,
    contractUntil,
    clubJerseyNumber,
    clubJoinedOn,
    onLoad,
    preferredFoot,
    weakFootRating,
    skillMoves,
    internationalReputation,
    nationalTeamName,
    nationalTeamImageLink,
    nationalTeamPosition,
    nationalTeamJerseyNumber,
    attackingWorkRate,
    defensiveWorkRate,
    paceTotal,
    ShootingTotal,
    passingTotal,
    dribblingTotal,
    defendingTotal,
    physicalTotal,
    crossing,
    finishing,
    headingAccuracy,
    shortPassing,
    volleys,
    dribbling,
    curve,
    freeKickAccuracy,
    longPassing,
    ballControl,
    acceleration,
    sprintSpeed,
    agility,
    reactions,
    balance,
    shotPower,
    jumping,
    stamina,
    strength,
    longShots,
    aggression,
    interceptions,
    positioning,
    vision,
    penalties,
    composure,
    marking,
    standingTackle,
    slidingTackle,
    gkDiving,
    gkHandling,
    gkKicking,
    gkPositioning,
    gkReflexes,
    stRating,
    lwRating,
    lfRating,
    cfRating,
    rfRating,
    rwRating,
    camRating,
    lmRating,
    cmRating,
    rmRating,
    lwbRating,
    cdmRating,
    rwbRating,
    lbRating,
    cbRating,
    rbRating,
    gkRating,
  ] = record;

  return {
    fullName,
    knownAs: [knownAs],
    marketValue: +marketValue,
    bestPosition: bestPosition as Position,
    positionsPlayed: positionsPlayed.split(',') as Position[],
    nationality,
    imageLink,
    age: +age,
    height: +height,
    weight: +weight,
    totalStats: +totalStats,
    baseStats: +baseStats,
    preferredFoot: preferredFoot as Foot,
    weakFootRating: +weakFootRating as Rating,
    skillMoves: +skillMoves as Rating,
    internationalReputation: +internationalReputation as Rating,
    national:
      nationalTeamName === '-'
        ? undefined
        : {
            teamName: nationalTeamName === '-' ? undefined : nationalTeamName,
            avatar:
              nationalTeamImageLink === '-' ? undefined : nationalTeamImageLink,
            position:
              nationalTeamPosition == '-'
                ? undefined
                : (nationalTeamPosition as Position),
            jerseyNumber: Number(nationalTeamJerseyNumber) || undefined,
          },
    club: {
      clubName,
      wage: +wage,
      releaseClause: +releaseClause,
      clubPosition: clubPosition as Position,
      jerseyNumber: +clubJerseyNumber,
      joinedOn: new Date(+clubJoinedOn, 0, 1),
      onLoan: onLoad === 'TRUE' ? true : false,
      contractUntil: new Date(+contractUntil, 0, 1),
    },

    attackingWorkRate: attackingWorkRate as WorkRate,
    defensiveWorkRate: defensiveWorkRate as WorkRate,

    fifaStats: {
      overall: +overall,
      potential: +potential,
      paceTotal: +paceTotal,
      shootingTotal: +ShootingTotal,
      passingTotal: +passingTotal,
      dribblingTotal: +dribblingTotal,
      defendingTotal: +defendingTotal,
      physicalityTotal: +physicalTotal,
      crossing: +crossing,
      finishing: +finishing,
      headingAccuracy: +headingAccuracy,
      shortPassing: +shortPassing,
      volleys: +volleys,
      dribbling: +dribbling,
      curve: +curve,
      freekickAccuracy: +freeKickAccuracy,
      longPassing: +longPassing,
      ballControl: +ballControl,
      acceleration: +acceleration,
      sprintSpeed: +sprintSpeed,
      agility: +agility,
      reactions: +reactions,
      balance: +balance,
      shotPower: +shotPower,
      jumping: +jumping,
      stamina: +stamina,
      strength: +strength,
      longShots: +longShots,
      aggression: +aggression,
      interceptions: +interceptions,
      positioning: +positioning,
      vision: +vision,
      penalties: +penalties,
      composure: +composure,
      marking: +marking,
      standingTackle: +standingTackle,
      slidingTackle: +slidingTackle,

      goalKeeper: {
        goalkeeperDiving: +gkDiving,
        goalkeeperHandling: +gkHandling,
        goalkeeperKicking: +gkKicking,
        goalkeeperPositioning: +gkPositioning,
        goalkeeperReflexes: +gkReflexes,
      },

      ratings: {
        st: +stRating,
        lw: +lwRating,
        lf: +lfRating,
        cf: +cfRating,
        rf: +rfRating,
        rw: +rwRating,
        cam: +camRating,
        lm: +lmRating,
        cm: +cmRating,
        rm: +rmRating,
        lwb: +lwbRating,
        cdm: +cdmRating,
        rwb: +rwbRating,
        lb: +lbRating,
        cb: +cbRating,
        rb: +rbRating,
        gk: +gkRating,
      },
    },
  };
}
